<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Personal blog of Pranav Prakash">
    <meta property="og:site_name" content="Pranav Prakash"/>
    <title>Pranav Prakash &middot; Blog</title>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css"/>
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-old-ie-min.css"/>
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css"/>
    <!--<![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/build/style-old-ie.min.css"/>
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/build/style.min.css"/>
    <!--<![endif]-->
    <!--[if gt IE 8]><!-->
    <script async src="/build/app.min.js"></script>
    <!--<![endif]-->
    <!--[if lt IE 9]>
    <script async src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
    <![endif]-->
</head>
  <body>
    <div id="layout" class="pure-g">
      <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
          <img class="navimg" src="/assets/img/pranav.jpg" alt="Pranav"/>
          <h1 class="brand-title">Pranav Prakash</h1>
          <h2 class="brand-tagline">Software Developer, Photographer, Computer Addict &amp; Web Enthusiast</h2>
          <h4 class="social">
            <a href="/feed.xml"><i class="pp icon-rss-square"></i></a>
            <a href="http://in.linkedin.com/in/pranavprakash/"><i class="pp icon-linkedin-square"></i></a>
            <a href="https://github.com/pranavpr/"><i class="pp icon-github-square"></i></a>
          </h4>
          <nav class="nav">
            <ul class="nav-list">
              <li class="nav-item">
                <a class="pure-button" href="/">Home</a>
              </li>
              <li class="nav-item">
                <a class="pure-button" href="/about/">About</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <div class="content pure-u-1 pure-u-md-3-4">
      <div>
        <div class="posts">
          
  <h1 class="content-subhead">Latest Post</h1>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting" >
      <header class="post-header">
        <h2 itemprop="name headline" class="post-title">
        <a href="/2017/09/13/case-insensitive-exact-match-search-in-elasticsearch/" itemprop="url">
          Case insensitive exact match search in ElasticSearch
        </a>
        </h2>
        <p class="post-meta">
        <i class="icon-clock-o">&nbsp;</i><a itemprop="datePublished" content="13 Sep 2017" href="#" class="post-author">13 Sep 2017</a>&nbsp;<i class="icon-tags"></i>
         <a itemprop="keywords" href="/tags/elasticsearch/" class="post-category post-category-e">ELASTICSEARCH</a>   
        </p>
      </header>
      <div itemprop="articleBody" class="post-description">
        <p>
          
            <p>I had a requirement where I needed to do exact match search in ElasticSearch. After searching a bit I landed to <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_finding_exact_values.html">this</a> page of ElasticSearch documentation. I was thrilled that I got the solution quickly (thanking god and ElasticSearch team in my mind). Hence I started testing by creating an index using request below:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="err">PUT</span><span class="w"> </span><span class="err">localhost:</span><span class="mi">9200</span><span class="err">/products/</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"productName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_analyzed"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<a href="/2017/09/13/case-insensitive-exact-match-search-in-elasticsearch/">Continue Reading »</a>
          
        </p>
      </div>
      <meta itemprop="wordCount" content="939">
      <meta itemprop="author" content="Pranav Prakash">
    </article>
  
  <h1 class="content-subhead">Recent Posts</h1>
  
  
    
    
  

    
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting" >
        <header class="post-header">
          <h2 itemprop="name headline" class="post-title">
          <a href="/2017/02/04/automate-mongodb-backups-using-cron-and-shell-script/" itemprop="url">
            Automate MongoDB backups using Cron and Shell Script
          </a>
          </h2>
          <p class="post-meta">
          <i class="icon-clock-o">&nbsp;</i><a itemprop="datePublished" content="04 Feb 2017" href="#" class="post-author">04 Feb 2017</a>&nbsp;<i class="icon-tags"></i>
           <a itemprop="keywords" href="/tags/devops/" class="post-category post-category-d">DEVOPS</a>    <a itemprop="keywords" href="/tags/mongodb/" class="post-category post-category-m">MONGODB</a>    <a itemprop="keywords" href="/tags/cron/" class="post-category post-category-c">CRON</a>    <a itemprop="keywords" href="/tags/shell/" class="post-category post-category-s">SHELL</a>   
          </p>
        </header>
        <div itemprop="articleBody" class="post-description">
          <p>
          
            <p>After having a bitter experience of losing data due to execution of wrong command, I decided to backup my database regularly. Hence I wrote a simple shell script which backs up the database and produces gzipped version of backup files. Below is the shell script:</p>

<a href="/2017/02/04/automate-mongodb-backups-using-cron-and-shell-script/">Continue Reading »</a>
          
        </p>
      </div>
      <meta itemprop="wordCount" content="608">
      <meta itemprop="author" content="Pranav Prakash">
    </article>
  

    
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting" >
        <header class="post-header">
          <h2 itemprop="name headline" class="post-title">
          <a href="/2016/02/05/kill-idle-connections-to-redis/" itemprop="url">
            Kill idle connections to Redis
          </a>
          </h2>
          <p class="post-meta">
          <i class="icon-clock-o">&nbsp;</i><a itemprop="datePublished" content="05 Feb 2016" href="#" class="post-author">05 Feb 2016</a>&nbsp;<i class="icon-tags"></i>
           <a itemprop="keywords" href="/tags/redis/" class="post-category post-category-r">REDIS</a>    <a itemprop="keywords" href="/tags/aws/" class="post-category post-category-a">AWS</a>    <a itemprop="keywords" href="/tags/python/" class="post-category post-category-p">PYTHON</a>    <a itemprop="keywords" href="/tags/elasticache/" class="post-category post-category-e">ELASTICACHE</a>   
          </p>
        </header>
        <div itemprop="articleBody" class="post-description">
          <p>
          
            <p>I was using a Amazon Elasticache <code class="highlighter-rouge">cache.t2.medium</code> Redis instance as a cache store for one of the Rails application. Over the time I observed that connections to Redis instance are increasing day by day and once it hit ~1500, the Rails application started throwing connection timeout exceptions:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>Error connecting to Redis on redis-host:6379 <span class="o">(</span>Redis::TimeoutError<span class="o">)</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>On searching over internet, I found that the default parameter group has <code class="highlighter-rouge">timeout</code> value set to 0 which means, any connection that has been initialized to redis will be kept by redis even if the connection initialized by the client is down. Well the first thing I did was to create a new parameter group and set its value to a non-zero integer. However I couldn’t apply the parameter group changes to live production application and hence started looking for alternatives.</p>

<a href="/2016/02/05/kill-idle-connections-to-redis/">Continue Reading »</a>
          
        </p>
      </div>
      <meta itemprop="wordCount" content="642">
      <meta itemprop="author" content="Pranav Prakash">
    </article>
  

    
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting" >
        <header class="post-header">
          <h2 itemprop="name headline" class="post-title">
          <a href="/2015/02/09/sending-asynchronous-emails-using-sidekiq-on-openshift/" itemprop="url">
            Sending asynchronous emails using Sidekiq on OpenShift
          </a>
          </h2>
          <p class="post-meta">
          <i class="icon-clock-o">&nbsp;</i><a itemprop="datePublished" content="09 Feb 2015" href="#" class="post-author">09 Feb 2015</a>&nbsp;<i class="icon-tags"></i>
           <a itemprop="keywords" href="/tags/sidekiq/" class="post-category post-category-s">SIDEKIQ</a>    <a itemprop="keywords" href="/tags/email/" class="post-category post-category-e">EMAIL</a>    <a itemprop="keywords" href="/tags/ruby-on-rails/" class="post-category post-category-r">RUBY ON RAILS</a>    <a itemprop="keywords" href="/tags/devise/" class="post-category post-category-d">DEVISE</a>    <a itemprop="keywords" href="/tags/openshift/" class="post-category post-category-o">OPENSHIFT</a>   
          </p>
        </header>
        <div itemprop="articleBody" class="post-description">
          <p>
          
            <p>If you need to send transactional emails from your Rails application, you should always send them asynchronously using a background job. If you send transactional emails synchronously, the user will see a loading page for the time rails connect to SMTP server and delivers your email which is about 2-3 seconds. This will result in a very bad user experience and it’s advisable to send emails using a background job.</p>

<p><a href="http://sidekiq.org/">Sidekiq</a> advertises it self as simple, efficient background processing engine for Ruby. Sidekiq has dependency on <a href="http://redis.io/">Redis</a> version <code class="highlighter-rouge">2.4</code> or greater. Hence to setup Sidekiq on OpenShift, we have to setup Redis first. So let’s get started.</p>

<h2 id="setting-up-redis">Setting up Redis</h2>

<p>Redis cartridge for Openshift is available <a href="https://github.com/smarterclayton/openshift-redis-cart">here</a>. To add this cartridge to existing Openshift application, issue following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>rhc add-cartridge http://cartreflect-claytondev.rhcloud.com/reflect?github<span class="o">=</span>smarterclayton/openshift-redis-cart<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<a href="/2015/02/09/sending-asynchronous-emails-using-sidekiq-on-openshift/">Continue Reading »</a>
          
        </p>
      </div>
      <meta itemprop="wordCount" content="607">
      <meta itemprop="author" content="Pranav Prakash">
    </article>
  

    
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting" >
        <header class="post-header">
          <h2 itemprop="name headline" class="post-title">
          <a href="/2014/12/28/active-admin-and-paperclip-done-right/" itemprop="url">
            Active Admin and Paperclip done right
          </a>
          </h2>
          <p class="post-meta">
          <i class="icon-clock-o">&nbsp;</i><a itemprop="datePublished" content="28 Dec 2014" href="#" class="post-author">28 Dec 2014</a>&nbsp;<i class="icon-tags"></i>
           <a itemprop="keywords" href="/tags/ruby-on-rails/" class="post-category post-category-r">RUBY ON RAILS</a>    <a itemprop="keywords" href="/tags/active-admin/" class="post-category post-category-a">ACTIVE ADMIN</a>    <a itemprop="keywords" href="/tags/paperclip/" class="post-category post-category-p">PAPERCLIP</a>   
          </p>
        </header>
        <div itemprop="articleBody" class="post-description">
          <p>
          
            <p><a href="https://github.com/activeadmin/activeadmin">Active Admin</a> is an administration framework for Ruby on Rails applications which helps in creating beautiful administration panels. <a href="https://github.com/thoughtbot/paperclip">Paperclip</a> is a file attachment library for Active Record which makes management of files to models really easy.</p>

<p>Recently while creating administration page for a model, in which Paperclip was being used for managing attachments, I oberved that Active Admin was not handling it properly. For example, the view page was showing as below:</p>

<div style="text-align: center"><img src="/assets/img/blog/view.png" /></div>

<a href="/2014/12/28/active-admin-and-paperclip-done-right/">Continue Reading »</a>
          
        </p>
      </div>
      <meta itemprop="wordCount" content="558">
      <meta itemprop="author" content="Pranav Prakash">
    </article>
  


<div class="footer">
<div class="pure-menu pure-menu-horizontal pure-menu-open">
  <ul>
    
      <li><a href="/page/2/">« Older</a></li>
    
    
      <li>Newer »</li>
    
  </ul>
  <p>
  &copy; 2017. All rights reserved.
  </p>
</div>
</div>
        </div>
      </div>
    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48826636-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>